<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Appwrite Auth</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50">
  <div class="min-h-screen flex flex-col items-center justify-center">
    <h1 class="text-3xl font-bold mb-4">Test Appwrite Auth</h1>
    <div id="test-results" class="bg-white shadow rounded p-6 w-full max-w-lg mb-6"></div>
    <button class="btn-primary" id="run-tests">Lancer les tests</button>
  </div>
  <script type="module">
    import { Client, Account } from "appwrite";
    const results = document.getElementById('test-results');
    const btn = document.getElementById('run-tests');
    const client = new Client()
      .setEndpoint(import.meta.env.VITE_APPWRITE_ENDPOINT || "https://cloud.appwrite.io/v1")
      .setProject(import.meta.env.VITE_APPWRITE_PROJECT_ID || "68d6cf15003d05dbd780");
    const account = new Account(client);
    async function runTests() {
      results.innerHTML = '<b>Test en cours...</b>';
      let output = '';
      // Test 1: Appwrite config
      try {
        output += '<div>✅ Appwrite importé</div>';
        output += `<div>Endpoint: ${client.config.endpoint}</div>`;
        output += `<div>Project: ${client.config.project}</div>`;
      } catch (e) {
        output += '<div>❌ Erreur config Appwrite : ' + e.message + '</div>';
      }
      // Test 2: Authentification
      try {
        await account.get();
        output += '<div>✅ Utilisateur authentifié</div>';
      } catch (e) {
        output += '<div>⚠️ Utilisateur non authentifié : ' + (e.message || e.toString()) + '</div>';
      }
      results.innerHTML = output;
    }
    btn.addEventListener('click', runTests);
  </script>
</body>
</html>
